/*! ngTable v0.1.4 by Vitalii Savchuk(esvit666@gmail.com) - https://github.com/esvit/ng-table - New BSD License */
"use strict";angular.module("ngTable",[]).directive("ngTable",["$compile","$q","$parse","$http","ngTableOptions","$templateCache","$rootElement","$timeout",function(a,b,c,d,e){return{restrict:"A",priority:1001,scope:{options:"=ngTable",showFilter:"=?"},controller:["$scope","$timeout",function(a){var b;return a.options=a.options||new e({page:1,count:10}),a.$watch("options.filter",function(){return a.options.$liveFiltering&&a.options.paginationEnabled?a.goToPage(1):void 0},!0),b=function(b){return angular.extend(a.options,b)},a.goToPage=function(c){return c>0&&a.options.page!==c&&a.options.count*(c-1)<=a.options.total?b({page:c}):void 0},a.changeCount=function(a){return b({page:1,count:a})},a.doFilter=function(){return b({page:1})},a.sortBy=function(c){var d,e;if(c.sortable)return d=a.options.sorting&&a.options.sorting[c.sortable]&&"desc"===a.options.sorting[c.sortable],e={},e[c.sortable]=d?"asc":"desc",b({sorting:e})}}],compile:function(b){var d,e;return e=0,d=[],angular.forEach(b.find("tr").eq(0).find("td"),function(a){var b,f,g,h,i;return b=angular.element(a),b.attr("ignore-cell")&&"true"===b.attr("ignore-cell")?void 0:(i=function(a){return c(b.attr("data-title"))(a)||b.attr("data-title")||" "},b.attr("data-title-text",i()),h=b.attr("header")?c(b.attr("header"))():!1,f=b.attr("filter")?c(b.attr("filter"))():!1,g=!1,f&&f.templateURL&&(g=f.templateURL,delete f.templateURL),d.push({id:e++,title:i,sortable:b.attr("data-sortable")?b.attr("data-sortable"):!1,filter:f,filterTemplateURL:g,headerTemplateURL:h,filterData:b.attr("filter-data")?b.attr("filter-data"):null,show:b.attr("ng-show")?function(a){return c(b.attr("ng-show"))(a)}:function(){return!0}}))}),function(b,f,g){var h,i;return b.columns=d,h=function(a,b,c){var d,f,g,h,i,j;if(d=11,j=[],i=Math.ceil(b/c),i>1){for(j.push({type:"prev",number:Math.max(1,a-1),active:a>1}),j.push({type:"first",number:1,active:a>1}),g=Math.round((d-5)/2),h=Math.max(2,a-g),f=Math.min(i-1,a+2*g-(a-h)),h=Math.max(2,h-(2*g-(f-h))),e=h;f>=e;)e===h&&2!==e||e===f&&e!==i-1?j.push({type:"more"}):j.push({type:"page",number:e,active:a!==e}),e++;j.push({type:"last",number:i,active:a!==i}),j.push({type:"next",number:Math.min(i,a+1),active:i>a})}return j},b.$watch("options",function(a){return angular.isUndefined(a)?void 0:b.pages=h(a.page,a.total,a.count)},!0),b.parse=function(a){return a?a(b):void 0},angular.forEach(d,function(a){var d;if(a.filterData){if(d=c(a.filterData)(b,{$column:a}),!angular.isObject(d)||!angular.isFunction(d.then))throw new Error("Function "+a.filterData+" must be promise");return delete a.filterData,d.then(function(b){return angular.isArray(b)||(b=[]),b.unshift({title:"-",id:""}),a.data=b})}}),!f.hasClass("ng-table")&&(b.tplHeader=g.templateHeader?g.templateHeader:"ng-table/header.html",b.tplPager=g.templatePagination?g.templatePagination:"ng-table/pager.html",i=a('<div><ng-include src="tplPager"></ng-include></div>')(b),f.find("thead").remove(),f[0].createTHead().setAttribute("ng-include","tplHeader"),a(f.find("thead"))(b),f.addClass("ng-table"),b.options.paginationEnabled)?f.after(i):void 0}}}}]);var __hasProp={}.hasOwnProperty;angular.module("ngTable").factory("ngTableOptions",function(){var a;return a=function(a){var b;return b=["total","counts","$liveFiltering"],this.page=1,this.count=1,this.counts=[10,25,50,100],this.filter={},this.sorting={},this.paginationEnabled=!0,angular.extend(this,a),this.orderBy=function(){var a,b,c,d;c=[],d=this.sorting;for(a in d)__hasProp.call(d,a)&&(b=d[a],c.push(("asc"===b?"+":"-")+a));return c},this.url=function(a){var c,d,e,f,g,h;a=a||!1,f=a?[]:{};for(d in this)if(angular.has(this,d)){if(b.indexOf(d)>=0)continue;if(c=this[d],e=encodeURIComponent(d),"object"==typeof c)for(h in c)angular.isUndefined(c[h])||""===c[h]||(g=e+"["+encodeURIComponent(h)+"]",a?f.push(g+"="+encodeURIComponent(c[h])):f[g]=encodeURIComponent(c[h]));else angular.isFunction(c)||angular.isUndefined(c)||""===c||(a?f.push(e+"="+encodeURIComponent(c)):f[e]=encodeURIComponent(c))}return f},this}}),angular.module("ngTable").run(["$templateCache",function(a){a.put("ng-table/filters/button.html",'<button ng-click="doFilter()" ng-show="filter==\'button\'" class="btn btn-primary btn-block">Filter</button>'),a.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in column.data" ng-model="options.filter[name]" ng-show="filter==\'select\'" class="filter filter-select"></select>'),a.put("ng-table/filters/text.html",'<input type="text" ng-model="options.filter[name]" ng-show="filter==\'text\'" class="input-filter"/>'),a.put("ng-table/header.html",'<tr><th ng-class="{sortable: column.sortable,\'sort-asc\': options.sorting[column.sortable]==\'asc\', \'sort-desc\': options.sorting[column.sortable]==\'desc\'}" ng-click="sortBy(column)" ng-repeat="column in columns" ng-show="column.show(this)" class="header"><div ng-hide="column.headerTemplateURL" ng-bind="parse(column.title)"></div><div ng-show="column.headerTemplateURL" ng-include="column.headerTemplateURL"></div></th></tr><tr ng-show="showFilter" class="ng-table-filters"><th ng-repeat="column in columns" ng-show="column.show(this)" data-title-text="{{column.title}}" class="filter"><form ng-submit="doFilter()"><input type="submit" tabindex="-1" style="position: absolute; left: -9999px; width: 1px; height: 1px;"/><div ng-repeat="(name, filter) in column.filter"><div ng-if="column.filterTemplateURL"><div ng-include="column.filterTemplateURL"></div></div><div ng-if="!column.filterTemplateURL"><div ng-include="\'ng-table/filters/\' + filter + \'.html\'"></div></div></div></form></th></tr>'),a.put("ng-table/pager.html",'<div class="ng-cloak"><ul class="pagination"><li ng-class="{\'disabled\': !page.active}" ng-repeat="page in pages" ng-switch="page.type"><a ng-switch-when="prev" ng-click="goToPage(page.number)" href="">«</a><a ng-switch-when="first" ng-click="goToPage(page.number)" href="">{{page.number}}</a><a ng-switch-when="page" ng-click="goToPage(page.number)" href="">{{page.number}}</a><a ng-switch-when="more" ng-click="goToPage(page.number)" href="">…</a><a ng-switch-when="last" ng-click="goToPage(page.number)" href="">{{page.number}}</a><a ng-switch-when="next" ng-click="goToPage(page.number)" href="">»</a></li></ul><div ng-show="options.counts.length" class="btn-group pull-right"><button ng-repeat="count in options.counts" type="button" ng-class="{\'active\':options.count==count}" ng-click="changeCount(count)" class="btn btn-mini">{{count}}</button></div></div>')}]);
/*
//@ sourceMappingURL=ng-table.map
*/